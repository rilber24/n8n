{
  "updatedAt": "2025-11-24T15:28:36.000Z",
  "createdAt": "2025-11-24T13:25:51.919Z",
  "id": "T7w8mR2urOKje1zB",
  "name": "Backup Automático Workflows a GitHub (API v1)",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "functionCode": "const list = items[0].json.data || [];\nreturn list.map(wf => ({ json: wf }));"
      },
      "id": "d9cab2ac-6a48-4012-b3b1-03db256011c1",
      "name": "Split data[] to items",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        624,
        -112
      ]
    },
    {
      "parameters": {
        "functionCode": "const wf = items[0].json;\nconst content = JSON.stringify(wf, null, 2);\nconst safeName = (wf.name || `workflow_${wf.id}`).replace(/[\\\\/:*?\"<>|]/g, \"_\");\n\nreturn [\n  {\n    json: {},\n    binary: {\n      data: {\n        data: Buffer.from(content, \"utf8\").toString(\"base64\"),\n        mimeType: \"application/json\",\n        fileName: `${safeName}.json`,\n      }\n    }\n  }\n];"
      },
      "id": "da924f0e-691f-4515-b3f3-10ced8fc6a45",
      "name": "Prepare JSON File",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        1088,
        -112
      ]
    },
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "hour": 1
            }
          ]
        }
      },
      "id": "e27717e6-ffe7-4877-be02-8b4c6cd354a2",
      "name": "Cron1",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        128,
        -112
      ]
    },
    {
      "parameters": {
        "url": "https://n8n.ril.serviciocliente.site/api/v1/workflows",
        "options": {},
        "headerParametersUi": {
          "parameter": [
            {
              "name": "X-N8N-API-KEY",
              "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyYmUwYmI2Ny05NjkwLTQ4NjYtOGE4Yi1jODVkNzYyMGZiOTMiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzYzOTkxMTQ5fQ.hiX1Ku26KEtQgN5aduRIM12tZYl4lEktCkPr-FlPufA"
            }
          ]
        }
      },
      "id": "b5f016f8-52ec-4705-8f34-06fa34500a2d",
      "name": "Get Workflows1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [
        384,
        -112
      ]
    },
    {
      "parameters": {
        "batchSize": 1,
        "options": {}
      },
      "id": "eccb4787-c5f7-42cb-b009-a96cb816567a",
      "name": "Split Workflows1",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 1,
      "position": [
        848,
        -112
      ]
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "resource": "file",
        "owner": {
          "__rl": true,
          "value": "rilber24",
          "mode": "list",
          "cachedResultName": "rilber24",
          "cachedResultUrl": "https://github.com/rilber24"
        },
        "repository": {
          "__rl": true,
          "value": "n8n",
          "mode": "list",
          "cachedResultName": "n8n",
          "cachedResultUrl": "https://github.com/rilber24/n8n"
        },
        "filePath": "=workflows/{{$binary.data.fileName}}",
        "binaryData": true,
        "commitMessage": "Backup automático n8n - {{$now}}"
      },
      "id": "d84b84dc-3da4-48e2-8e94-3ca7a9aa0ed7",
      "name": "Upload to GitHub1",
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [
        1328,
        -112
      ],
      "webhookId": "8d6e54ff-bf62-4414-97ab-41bbbe15c46f",
      "credentials": {
        "githubOAuth2Api": {
          "id": "PEv2nVtvP48wKeGG",
          "name": "GitHub account"
        }
      }
    }
  ],
  "connections": {
    "Split data[] to items": {
      "main": [
        [
          {
            "node": "Split Workflows1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare JSON File": {
      "main": [
        [
          {
            "node": "Upload to GitHub1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cron1": {
      "main": [
        [
          {
            "node": "Get Workflows1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Workflows1": {
      "main": [
        [
          {
            "node": "Split data[] to items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Workflows1": {
      "main": [
        [
          {
            "node": "Prepare JSON File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload to GitHub1": {
      "main": [
        [
          {
            "node": "Split Workflows1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "84f2b6ec-a975-4c40-8a51-156a59f6b531",
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-11-24T13:25:51.927Z",
      "createdAt": "2025-11-24T13:25:51.927Z",
      "role": "workflow:owner",
      "workflowId": "T7w8mR2urOKje1zB",
      "projectId": "DLCF6dMNvaWDIOVx"
    }
  ],
  "tags": []
}